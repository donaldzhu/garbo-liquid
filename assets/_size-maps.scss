@use 'sizes' as *;
@use 'typography' as *;
@use 'layouts' as *;

$breakpoints: (
  xs: 0,
  s: $s,
  m: $m,
  l: $l,
  xl: $xl,
  xxl: $xxl,
);

// ============================================================================
// TYPOGRAPHY
// ============================================================================

$section-header: (
  xs: $header-m,
  s: $header-l,
  m: $header-l,
  l: $header-l,
  xl: $header-xl,
  xxl: $header-xxl,
);

$subsection-header: (
  xs: $subheader-l,
  s: $subheader-l,
  m: $subheader-l,
  l: $subheader-l,
  xl: $subheader-xxl,
  xxl: $subheader-xxl,
);

$large-copy: (
  xs: $copy,
  s: $large-copy-s,
  m: $large-copy-s,
  l: $large-copy-m,
  xl: $large-copy-l,
  xxl: $large-copy-xl,
);

$medium-copy: (
  xs: $large-copy-xs,
  s: $large-copy-xs,
  m: $large-copy-xs,
  l: $large-copy-xs,
  xl: $large-copy-s,
  xxl: $large-copy-s,
);

$small-copy: (
  xs: $copy-s,
  s: $copy-s,
  m: $copy-s,
  l: $copy-s,
  xl: $copy-m,
  xxl: $copy-m,
);

$header-font-size: (
  xs: $copy-s,
  s: $copy-s,
  m: $copy-s,
  l: $copy-s,
  xl: $copy,
  xxl: $copy,
);

$ui-small: (
  xs: $copy-s,
  s: $copy-s,
  m: $copy-s,
  l: $copy-s,
  xl: $copy-s,
  xxl: $copy-s,
);

$small-copy-label: (
  xs: $copy,
  s: $copy,
  m: $copy,
  l: $copy,
  xl: $copy,
  xxl: $copy,
);

$variant-pill: (
  xs: $copy-s,
  s: $copy-s,
  m: $copy-s,
  l: $copy-s,
  xl: $copy-m,
  xxl: $copy-m,
);

// ============================================================================
// SPACING & MARGINS
// ============================================================================

$page-margin-x: (
  xs: $spacing-s,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-m,
  xl: $spacing-l,
  xxl: $spacing-l,
);

$page-margin-y: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-m,
  xl: $spacing-m,
  xxl: $spacing-m,
);

$header-margin-y: (
  xs: $spacing-l,
  s: $spacing-l,
  m: $spacing-l,
  l: $spacing-s,
  xl: $spacing-m,
  xxl: $spacing-m,
);

$section-media-spacing: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-l,
  xl: $spacing-xl,
  xxl: $spacing-xl,
);

$large-inner-section-gap: (
  xs: $large-spacing-s,
  s: $large-spacing-s,
  m: $large-spacing-s,
  l: $large-spacing-s,
  xl: $large-spacing-m,
  xxl: $large-spacing-m,
);

$homepage-stories-description-margin-top: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-l,
  xl: $spacing-xl,
  xxl: $spacing-xl,
);

$paragraph-spacing: (
  xs: $small-space-l,
  s: $small-space-l,
  m: $small-space-l,
  l: $small-space-l,
  xl: $spacing-s,
  xxl: $spacing-s,
);

$inner-section-spacing: (
  xs: $large-spacing-xs,
  s: $large-spacing-xs,
  m: $large-spacing-xs,
  l: $large-spacing-xs,
  xl: $large-spacing-s,
  xxl: $large-spacing-s,
);

$products-margin-bottom: (
  xs: $spacing-xxl,
  s: $spacing-xxl,
  m: $spacing-xxl,
  l: $spacing-xxl,
  xl: $large-spacing-xs,
  xxl: $large-spacing-xs,
);

$product-insert-price-margin: (
  xs: $small-space-xxs,
  s: $small-space-xxs,
  m: $small-space-xxs,
  l: $small-space-xxs,
  xl: $small-space-xs,
  xxl: $small-space-xs,
);

$products-gap: (
  xs: $small-space-m,
  s: $small-space-m,
  m: $small-space-m,
  l: $small-space-m,
  xl: $small-space-m,
  xxl: $small-space-m,
);

$blurb-button-margin-top: (
  xs: $small-space-m,
  s: $small-space-m,
  m: $small-space-m,
  l: $small-space-m,
  xl: $small-space-m,
  xxl: $small-space-m,
);

$form-button-margin-top: (
  xs: $spacing-l,
  s: $spacing-l,
  m: $spacing-l,
  l: $spacing-l,
  xl: $spacing-xl,
  xxl: $spacing-xl,
);

$list-margin: (
  xs: $small-space-l,
  s: $small-space-l,
  m: $small-space-l,
  l: $small-space-l,
  xl: $spacing-s,
  xxl: $spacing-s,
);

$column-gap: (
  xs: $spacing-s,
  s: $spacing-s,
  m: $spacing-s,
  l: $spacing-s,
  xl: $spacing-m,
  xxl: $spacing-m,
);

$inner-column-gap: (
  xs: $small-space-l,
  s: $small-space-l,
  m: $small-space-l,
  l: $small-space-l,
  xl: $spacing-s,
  xxl: $spacing-s,
);

$header-gap: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-m,
  xl: $spacing-l,
  xxl: $spacing-l,
);

$footer-padding: (
  xs: $spacing-l,
  s: $spacing-l,
  m: $spacing-l,
  l: $large-spacing-xs,
  xl: $large-spacing-s,
  xxl: $large-spacing-s,
);

$footer-margin-top: (
  xs: $large-spacing-s,
  s: $large-spacing-m,
  m: $large-spacing-m,
  l: $large-spacing-l,
  xl: $large-spacing-xl,
  xxl: $large-spacing-xl,
);

$product-details-gap: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-m,
  xl: $spacing-l,
  xxl: $spacing-l,
);

$filter-label-margin: (
  xs: $small-space-m,
  s: $small-space-m,
  m: $small-space-m,
  l: $small-space-m,
  xl: $small-space-l,
  xxl: $small-space-l,
);

$large-section-gap: (
  xs: $large-spacing-m,
  s: $large-spacing-m,
  m: $large-spacing-m,
  l: $large-spacing-m,
  xl: $large-spacing-l,
  xxl: $large-spacing-l,
);

$dot-margin-bottom: (
  xs: $spacing-m,
  s: $spacing-m,
  m: $spacing-m,
  l: $spacing-m,
  xl: $spacing-l,
  xxl: $spacing-xl,
);

$founder-image-margin: (
  xs: $spacing-l,
  s: $spacing-l,
  m: $spacing-l,
  l: $spacing-l,
  xl: $spacing-xl,
  xxl: $spacing-xl,
);

$small-space-y: (
  xs: $small-space-m,
  s: $small-space-m,
  m: $small-space-m,
  l: $small-space-m,
  xl: $small-space-m,
  xxl: $small-space-m,
);

$detail-label-margin: (
  xs: $small-space-xs,
  s: $small-space-xs,
  m: $small-space-xs,
  l: $small-space-xs,
  xl: $small-space-s,
  xxl: $small-space-s,
);

$story-list-margin: (
  xs: $spacing-xxl,
  s: $spacing-xxl,
  m: $spacing-xxl,
  l: $spacing-xxl,
  xl: $large-spacing-xs,
  xxl: $large-spacing-xs,
);

$hair-space-y: (
  xs: $small-space-xs,
  s: $small-space-xs,
  m: $small-space-xs,
  l: $small-space-xs,
  xl: $small-space-xs,
  xxl: $small-space-xs,
);

$footer-icon-spacing: (
  xs: $spacing-s,
  s: $spacing-s,
  m: $spacing-s,
  l: $spacing-s,
  xl: $spacing-m,
  xxl: $spacing-m,
);

$radio-input-gap: (
  xs: $small-space-xs,
  s: $small-space-xs,
  m: $small-space-xs,
  l: $small-space-xs,
  xl: $small-space-s,
  xxl: $small-space-s,
);

// ============================================================================
// LAYOUT & SIZING
// ============================================================================

$full-width: (
  xs: full-width(),
  s: full-width(),
  m: full-width(),
  l: full-width(),
  xl: full-width(),
  xxl: full-width($xxl),
);

$inset-width: (
  xs: min(full-width(), column-width(8, full-width($l))),
  s: min(full-width(), column-width(8, full-width($l))),
  m: min(full-width(), column-width(8, full-width($l))),
  l: column-width(8),
  xl: column-width(8),
  xxl: column-width(8),
);

$list-width: (
  xs: column-width(4, full-width($l)),
  s: column-width(4, full-width($l)),
  m: column-width(4, full-width($l)),
  l: column-width(4, full-width($l)),
  xl: column-width(3),
  xxl: column-width(3),
);

$socials-embed-width: (
  xs: min(column-width(4, full-width($xl)), full-width()),
  s: min(column-width(4, full-width($xl)), full-width()),
  m: min(column-width(4, full-width($xl)), full-width()),
  l: min(column-width(4, full-width($xl)), full-width()),
  xl: column-width(4),
  xxl: column-width(4),
);

$homepage-stories-image-height: (
  xs: 600px,
  s: 800px,
  m: 800px,
  l: 1000px,
  xl: 1000px,
  xxl: 1200px,
);

$homepage-stories-image-height-short: (
  xs: 250px,
  s: 400px,
  m: 400px,
  l: 500px,
  xl: 500px,
  xxl: 650px,
);

$text-max-width: (
  xs: min(full-width(), 600px),
  s: min(full-width(), 600px),
  m: min(full-width(), 600px),
  l: min(full-width(), 600px),
  xl: min(full-width(), 725px),
  xxl: min(full-width(), 725px),
);

$text-max-width-long: (
  xs: min(full-width(), 800px),
  s: min(full-width(), 800px),
  m: min(full-width(), 800px),
  l: min(full-width(), 800px),
  xl: min(full-width(), 900px),
  xxl: min(full-width(), 900px),
);

$side-info-width: (
  xs: full-width(),
  s: full-width(),
  m: full-width(),
  l: column-width($side-info-columns - 1, full-width($xl)),
  xl: column-width($side-info-columns),
  xxl: column-width($side-info-columns),
);


$split-image-width: (
  xs: full-width(),
  s: full-width(),
  m: full-width(),
  l: calc(var(--full-width) - var(--side-info-width) - var(--column-gap)),
  xl: column-width($total-columns - $side-info-columns),
  xxl: column-width($total-columns - $side-info-columns),
);

$newsletter-max-width: (
  xs: 575px,
  s: 575px,
  m: 575px,
  l: 575px,
  xl: 675px,
  xxl: 675px,
);

$homepage-logo-width: (
  xs: 300px,
  s: 350px,
  m: 450px,
  l: 550px,
  xl: 600px,
  xxl: 800px,
);

$homepage-image-size-aspect-ratio: 1.4;
$homepage-image-size-short: (
  xs: 150px,
  s: 200px,
  m: 200px,
  l: 200px,
  xl: 325px,
  xxl: 400px,
);

$homepage-ethos-image-size-short: (
  xs: min(var(--full-width), 300px),
  s: min(var(--full-width), 300px),
  m: min(var(--full-width), 400px),
  l: min(var(--full-width), 300px),
  xl: min(var(--full-width), 475px),
  xxl: min(var(--full-width), 550px),
);

$homepage-image-size-long: (
  xs: map-get($homepage-image-size-short, xs) * $homepage-image-size-aspect-ratio,
  s: map-get($homepage-image-size-short, s) * $homepage-image-size-aspect-ratio,
  m: map-get($homepage-image-size-short, m) * $homepage-image-size-aspect-ratio,
  l: map-get($homepage-image-size-short, l) * $homepage-image-size-aspect-ratio,
  xl: map-get($homepage-image-size-short, xl) * $homepage-image-size-aspect-ratio,
  xxl: map-get($homepage-image-size-short, xxl) * $homepage-image-size-aspect-ratio,
);

$homepage-ethos-image-size-long: (
  xs: calc(#{map-get($homepage-ethos-image-size-short, xs)} * #{$homepage-image-size-aspect-ratio}),
  s: calc(#{map-get($homepage-ethos-image-size-short, s)} * #{$homepage-image-size-aspect-ratio}),
  m: calc(#{map-get($homepage-ethos-image-size-short, m)} * #{$homepage-image-size-aspect-ratio}),
  l: calc(#{map-get($homepage-ethos-image-size-short, l)} * #{$homepage-image-size-aspect-ratio}),
  xl: calc(#{map-get($homepage-ethos-image-size-short, xl)} * #{$homepage-image-size-aspect-ratio}),
  xxl: calc(#{map-get($homepage-ethos-image-size-short, xxl)} * #{$homepage-image-size-aspect-ratio}),
);


$header-logo-height: (
  xs: 24px,
  s: 24px,
  m: 24px,
  l: 24px,
  xl: 30px,
  xxl: 30px,
);

$homepage-intro-logo-vw: (
  xs: 70vw,
  s: 70vw,
  m: 70vw,
  l: 70vw,
  xl: 60vw,
  xxl: 60vw,
);

$homepage-intro-image-padding-bottom: (
  xs: 0.4,
  s: 0.4,
  m: 0.4,
  l: 0.4,
  xl: 0.3,
  xxl: 0.25,
);

$homepage-newsletter-image-height: (
  xs: 95px,
  s: 115px,
  m: 130px,
  l: 150px,
  xl: 200px,
  xxl: 200px,
);

$dot-size: (
  xs: 16px,
  s: 16px,
  m: 16px,
  l: 20px,
  xl: 24px,
  xxl: 24px,
);

$media-border-radius: (
  xs: 1.5rem,
  s: 2rem,
  m: 2rem,
  l: 2.5rem,
  xl: 3rem,
  xxl: 3rem,
);

// ============================================================================
// COMPONENTS
// ============================================================================

$button-padding: (
  xs: $small-space-l $spacing-m,
  s: $small-space-l $spacing-m,
  m: $small-space-l $spacing-m,
  l: $small-space-l $spacing-m,
  xl: $small-space-l $spacing-m,
  xxl: $small-space-l $spacing-m,
);

$button-radius: (
  xs: $small-space-l * 2,
  s: $small-space-l * 2,
  m: $small-space-l * 2,
  l: $small-space-l * 2,
  xl: $small-space-l * 2,
  xxl: $small-space-l * 2,
);

$input-padding: (
  xs: $small-space-s,
  s: $small-space-s,
  m: $small-space-s,
  l: $small-space-s,
  xl: $small-space-m,
  xxl: $small-space-m,
);

$price-gap: (
  xs: $small-space-s,
  s: $small-space-s,
  m: $small-space-s,
  l: $small-space-s,
  xl: $small-space-m,
  xxl: $small-space-m,
);

// ============================================================================
// SIZE MAPS OBJECT (organized by category)
// ============================================================================

$size-maps: (
  // Typography
  section-header: $section-header,
  subsection-header: $subsection-header,
  large-copy: $large-copy,
  medium-copy: $medium-copy,
  small-copy: $small-copy,
  header-font-size: $header-font-size,
  small-copy-label: $small-copy-label,
  ui-small: $ui-small,
  variant-pill: $variant-pill,
  // Spacing & Margins
  page-margin-x: $page-margin-x,
  page-margin-y: $page-margin-y,
  header-margin-y: $header-margin-y,
  section-media-spacing: $section-media-spacing,
  large-inner-section-gap: $large-inner-section-gap,
  homepage-stories-description-margin-top: $homepage-stories-description-margin-top,
  paragraph-spacing: $paragraph-spacing,
  inner-section-spacing: $inner-section-spacing,
  products-margin-bottom: $products-margin-bottom,
  product-insert-price-margin: $product-insert-price-margin,
  products-gap: $products-gap,
  blurb-button-margin-top: $blurb-button-margin-top,
  form-button-margin-top: $form-button-margin-top,
  list-margin: $list-margin,
  column-gap: $column-gap,
  inner-column-gap: $inner-column-gap,
  header-gap: $header-gap,
  large-section-gap: $large-section-gap,
  dot-margin-bottom: $dot-margin-bottom,
  founder-image-margin: $founder-image-margin,
  small-space-y: $small-space-y,
  footer-icon-spacing: $footer-icon-spacing,
  radio-input-gap: $radio-input-gap,
  detail-label-margin: $detail-label-margin,
  hair-space-y: $hair-space-y,
  product-details-gap: $product-details-gap,
  filter-label-margin: $filter-label-margin,
  footer-padding: $footer-padding,
  footer-margin-top: $footer-margin-top,
  story-list-margin: $story-list-margin,
  // Layout & Sizing
  full-width: $full-width,
  inset-width: $inset-width,
  list-width: $list-width,
  socials-embed-width: $socials-embed-width,
  homepage-stories-image-height: $homepage-stories-image-height,
  homepage-stories-image-height-short: $homepage-stories-image-height-short,
  text-max-width: $text-max-width,
  text-max-width-long: $text-max-width-long,
  side-info-width: $side-info-width,
  split-image-width: $split-image-width,
  newsletter-max-width: $newsletter-max-width,
  homepage-logo-width: $homepage-logo-width,
  header-logo-height: $header-logo-height,
  homepage-intro-logo-vw: $homepage-intro-logo-vw,
  homepage-intro-image-padding-bottom: $homepage-intro-image-padding-bottom,
  homepage-image-size-short: $homepage-image-size-short,
  homepage-image-size-long: $homepage-image-size-long,
  homepage-ethos-image-size-short: $homepage-ethos-image-size-short,
  homepage-ethos-image-size-long: $homepage-ethos-image-size-long,
  homepage-newsletter-image-height: $homepage-newsletter-image-height,
  dot-size: $dot-size,
  media-border-radius: $media-border-radius,

  // Components
  button-padding: $button-padding,
  button-radius: $button-radius,
  input-padding: $input-padding,
  price-gap: $price-gap,
);

@mixin responsive-var($map, $var-name) {

  @if map-has-key($map, base) {
    #{$selector} {
      --#{$var-name}: #{map-get($map, base)};
    }
  }

  $ordered: (
  );

@each $bp, $size in $breakpoints {
  @if map-has-key($map, $bp) {
    $ordered: append($ordered, $bp);
  }
}

$len: length($ordered);

@for $i from 1 through $len {
  $bp: nth($ordered, $i);
  $min: map-get($breakpoints, $bp);
  $value: map-get($map, $bp);

  @if $i < $len {
    $next-bp: nth($ordered, $i + 1);
    $next-min: map-get($breakpoints, $next-bp);
    $max: $next-min - 1px;

    @if $bp =='xs' {
      @media (max-width: #{$max}) {
        :root {
          --#{$var-name}: #{$value};
        }
      }
    }

    @else {
      @media (min-width: #{$min}) and (max-width: #{$max}) {
        :root {
          --#{$var-name}: #{$value};
        }
      }
    }
  }

  @else {
    @media (min-width: #{$min}) {
      :root {
        --#{$var-name}: #{$value};
      }
    }
  }
}
}

@mixin responsive-vars-map($maps) {
  @each $var-name, $val in $maps {
    $val-type: type-of($val);

    @if $val-type =='list' and length($val)==2 {
      $map: nth($val, 1);
      $selector: nth($val, 2);
      @include responsive-var($map, $var-name, $selector);
    }

    @else if $val-type =='map' {
      @include responsive-var($val, $var-name);
    }

    @else {
      @warn "For `#{$var-name}`, expected map or (map, selector). Got `#{$val-type}`.";
    }
  }
}